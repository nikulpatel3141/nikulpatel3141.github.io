---
title: "Rust vs C++"
date: 2024-09-08T20:46:07+01:00
description: "Comparing Rust and CPP in Python"
draft: true
---

Many popular Python projects are using Rust, eg: [Polars](https://github.com/pola-rs/polars), [Pydantic](https://github.com/pydantic/pydantic), [uv, ruff, rye](https://github.com/astral-sh), [orjson](https://github.com/ijl/orjson).

I couldn't find as many using C++, so I wanted to investigate using both Rust and C++ from Python.

I'll use [pybind11](https://pybind11.readthedocs.io/en/stable/index.html#) for C++ and [PyO3](https://github.com/PyO3/pyo3) for Rust. The associated source code is [here](https://github.com/nikulpatel3141/MandelbrotPyRsCpp).

### Why Bother

Rust and C++ are generally faster than Python but have to be compiled and usually require more effort to write. Therefore being able to call Rust or C++ code allows for faster code without the associated downsides.

Other advantages of C++ and Rust include being strongly typed and parallelism (Python's [GIL](https://realpython.com/python-gil/) doesn't limit parallelism in C++ and Rust extension libraries).

## Rust

### Installation

[Maturin](https://github.com/PyO3/maturin) makes PyO3 easy to use for new projects. In your new project directory:

```bash
$ pip install maturin
...
$ maturin init  # follow the prompts
...
```

For existing projects you just need to add a few lines to your `pyproject.toml` and `Cargo.toml`. More details are [here](https://pyo3.rs/v0.22.2/getting-started#adding-to-an-existing-project).

### Writing the Extension






Rust *just works*
runs faster
has iterators (awkward to use)
supports kwargs out of the box
docstring???
uses macros, no ide complaints (no magic header file)
tooling is sleeker (no setup.py)

